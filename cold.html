<html>
<head>
    <script src="https://wzrd.in/standalone/nanocurrency@latest"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<div id="output" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <br />
        <p>Your Block:</p>
        <pre class="model-code"><code id="model-code"></code></pre>
    </div>
</div>

<body>
<h2>Cold Wallet:</h2>

<form onsubmit="return false;">
    <h4>Generate a Block:</h4>
    <label>Private Key: <input type="text" id="userPrivate" /></label><br />
    <label>Proof of Work: <input type="text" id="userPOW" /></label><br />
    <label>Previous Hash (Frontier): <input type="text" id="userPrevious" /></label><br />
    <label>Representative Address: <input type="text" id="userRepresentative" /></label><br />
    <label>Resulting Balance (Balance after you send your transaction): <input type="text" id="userBalance" /></label><br />
    <label>Destination Address: <input type="text" id="userDestination" /></label><br />
    <input type="submit" onclick="genBlock()" />
</form>

<script>
async function genBlock() {
    var x = document.getElementById("userPrivate").value;
    var data = new Object();
    data.work = String(document.getElementById("userPOW").value);
    data.previous = document.getElementById("userPrevious").value;
    data.representative = document.getElementById("userRepresentative").value;
    data.balance = document.getElementById("userBalance").value;
    data.link = document.getElementById("userDestination").value;
    userBlock = await nanocurrency.createStateBlock(x, data);
    document.getElementById("model-code").innerHTML = JSON.stringify(userBlock);
    modal.style.display = "block";
}
var modal = document.getElementById('output');
var span = document.getElementsByClassName("close")[0];
span.onclick = function() {
    modal.style.display = "none";
}
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}
</script>
</body>
</html>
